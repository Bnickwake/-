# –®–∞–ª—ã–≥–∏–Ω –ù–∏–∫–∏—Ç–∞ –§–ü—ç-01-22

import numpy as np
import matplotlib.pyplot as plt
import iapws
from iapws import IAPWS97 as gas

MPa = 10 ** 6
kPa = 10 ** 3
unit = 1 / MPa
grad_Cels = 1
                  #–ó–∞–¥–∞—á–∞ 1
#–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–≥–æ –ö–ü–î –ø–∞—Ä–æ—Ç—É—Ä–±–∏–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ø–µ—Ä–µ–≥—Ä–µ–≤–∞ –ø–∞—Ä–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –ø–∞—Ä–∞:
# ùëÉ0 = 5, 10, 15, 20 –ú–ü–∞. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤–∑—è—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
# ùë°0= 300, 350, 400, 450, 500 –≥—Ä–∞–¥—É—Å–æ–≤ –¶–µ–ª—å—Å–∏—è,
# ùëÉùëò= 5 –∫–ü–∞. –ü—Ä–∏–Ω—è—Ç—å –¥–∞–≤–ª–µ–Ω–∏–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—É–ø–µ–Ω—å—é –ø–∞—Ä–æ–≤–æ–π —Ç—É—Ä–±–∏–Ω—ã
# ùëÉ2=ùëÉùëò. –¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –ö–ü–î —Ü–∏–∫–ª–∞ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –±–µ–∑ —É—á–µ—Ç–∞ –ø–æ–¥–æ–≥—Ä–µ–≤–∞ –≤–æ–¥—ã –≤ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ–º –Ω–∞—Å–æ—Å–µ –∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.

# –º–∞—Å–∏–≤—ã –∑–Ω–∞—á–µ–Ω–∏–π –¥–∞–≤–ª–µ–Ω–∏—è –∏ —Ç–µ–º–ø—Ä–∞—Ç—É—Ä—ã
p0 = np.array([5, 10 , 15 , 20]) # –ú–µ–≥–∞ –ü–∞—Å–∫–∞–ª—å
t0 = np.array([300, 350, 400, 450 ,500]) # –ì—Ä–∞–¥—É—Å –¶–µ–ª—å—Å–∏—è
pk = 5 * kPa
# 1) KPD- –º–∞—Å—Å–∏–≤ –ö–ü–î
for P0 in p0:
    KPD = []
    for T0 in t0:
        point_0 = gas(P = P0, T = (T0 + 273.15))
        point_condenser_inlet = gas(P = (pk * unit) , s = point_0.s)
        point_pump_outlet = gas(P = (pk * unit), x = 0)
        useful_energy = point_0.h - point_condenser_inlet.h
        full_energy = point_0.h - point_pump_outlet.h
        kpd_value = (useful_energy / full_energy) * 100
        KPD.append(kpd_value)
    plt.xlabel("t0, –≥—Ä–∞–¥—É—Å—ã –¶–µ–ª—å—Å–∏—è")
    plt.ylabel("–¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –ö–ü–î, %")
    plt.title("–ì—Ä–∞—Ñ–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–≥–æ –ö–ü–î –æ—Ç to")
    plt.plot(t0[0:5],KPD[0:5], label = f"–ü—Ä–∏ P0 = {P0} –ú–ü–∞")
plt.grid()
plt.legend()
plt.show()


                # –ó–∞–¥–∞—á–∞ 2
# –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–≥–æ –ö–ü–î –ø–∞—Ä–æ—Ç—É—Ä–±–∏–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ø–µ—Ä–µ–≥—Ä–µ–≤–∞ –ø–∞—Ä–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –ø–∞—Ä–∞:
# ùëÉ0= 5 –ú–ü–∞,
# ùë°0= 450 –≥—Ä–∞–¥—É—Å–æ–≤ –¶–µ–ª—å—Å–∏—è,
# ùëÉùëò= 5, 10, 15, 20, 50 –∫–ü–∞. –ü—Ä–∏–Ω—è—Ç—å –¥–∞–≤–ª–µ–Ω–∏–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—É–ø–µ–Ω—å—é –ø–∞—Ä–æ–≤–æ–π —Ç—É—Ä–±–∏–Ω—ã
# ùëÉ2= ùëÉùëò. –¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –ö–ü–î —Ü–∏–∫–ª–∞ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –±–µ–∑ —É—á–µ—Ç–∞ –ø–æ–¥–æ–≥—Ä–µ–≤–∞ –≤–æ–¥—ã –≤ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ–º –Ω–∞—Å–æ—Å–µ –∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.


# –ó–Ω–∞—á–µ–Ω–∏–µ –¥–∞–≤–ª–µ–Ω–∏—è –∏ —Ç–µ–º–ø—Ä–∞—Ç—É—Ä—ã
p0 = 5   #–º–µ–≥–∞ –ø–∞—Å–∫–∞–ª—å
t0 = 450 #–≥—Ä–∞–¥—É—Å—ã —Ü–µ–ª—å—Å–∏—è
pk = np.array([5, 10, 15, 20, 50]) # –ö–∏–ª–æ –ü–∞—Å–∫–∞–ª—å
# 1) KPD- –º–∞—Å—Å–∏–≤ –ö–ü–î
KPD = []
for Pk in pk:
    point_0 = gas(P = p0, T = (t0 + 273.15))
    point_condenser_inlet = gas(P = Pk * (kPa / MPa), s = point_0.s)
    point_pump_outlet = gas(P = Pk * (kPa / MPa), x = 0)
    useful_energy = point_0.h - point_condenser_inlet.h
    full_energy = point_0.h - point_pump_outlet.h
    kpd_value = (useful_energy / full_energy) * 100
    KPD.append(kpd_value)
plt.xlabel("Pk, –∫–ü–∞")
plt.ylabel("–¢–µ—Ä–º–∏—á–µ—Å–∫–∏–π –ö–ü–î, %")
plt.title("–ì—Ä–∞—Ñ–∏–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–≥–æ –ö–ü–î –æ—Ç Pk")
plt.plot(pk[0:5],KPD[0:5], label = f"–ü—Ä–∏ P0 = {p0} (–ú–ü–∞) –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ t0= {t0} (–≥—Ä–∞–¥—É—Å –¶–µ–ª—å—Å–∏—è)")
plt.grid()
plt.legend( loc='upper left')
plt.show()
